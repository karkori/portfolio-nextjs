@import "tailwindcss";

@layer theme {
  :root,
  .light {
    --primary: white;
    --secondary: #131212;
    --third: #f8f8f8;

    /* Background/foreground */
    --background: oklch(0.98 0 0); /* near white */
    --foreground: oklch(0.24 0.02 281.02); /* dark gray */
    
    /* Colores para código */
    --code-bg: #f5f6f7;
    --code-text: #24292e; 
    --code-border: #e1e4e8;
    --code-comment: #6a737d;
    --code-keyword: #d73a49;
    --code-function: #6f42c1;
    --code-string: #032f62;
    --code-number: #005cc5;
    --code-variable: #e36209;
    --code-tag: #22863a;
  }

  .dark {
    --primary: black;
    --secondary: #f8f8f8;
    --third: #131212;

    /* Background/foreground */
    --background: oklch(0.12 0.01 281.02); /* very dark gray */
    --foreground: oklch(0.95 0 0); /* near white */
    
    /* Colores para código en modo oscuro */
    --code-bg: #161b22;
    --code-text: #c9d1d9;
    --code-border: #30363d;
    --code-comment: #8b949e;
    --code-keyword: #ff7b72;
    --code-function: #d2a8ff;
    --code-string: #a5d6ff;
    --code-number: #79c0ff;
    --code-variable: #ffa657;
    --code-tag: #7ee787;
  }
}

@layer base {
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 80px; /* Añade espacio para el header fijo */
  }

  body {
    background-color: var(--primary);
    color: var(--secondary);
  }

  .mode {
    background-color: var(--background);
    color: var(--foreground);
    font-family: "Poppins", sans-serif;
  }

  .section-title {
    font-size: 1.875rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    position: relative;
    display: inline-block;
    color: var(--secondary);
  }

  .section-title::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 0.25rem;
    background-color: purple;
    transform: scaleX(0.3);
    transform-origin: left;
  }

  /* Estilos específicos para contenido del blog en modo oscuro */
  .dark .prose p,
  .dark .prose li,
  .dark .prose h1,
  .dark .prose h2,
  .dark .prose h3,
  .dark .prose h4,
  .dark .prose h5,
  .dark .prose h6,
  .dark .prose strong,
  .dark .prose blockquote,
  .dark .prose code,
  .dark .prose em {
    color: var(--secondary) !important;
  }
  
  /* Estilos mejorados para código */
  .prose pre {
    position: relative;
    overflow-x: auto;
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
    font-size: 0.9rem;
    line-height: 1.6;
    border-radius: 0.5rem;
    padding: 1.25rem;
    margin: 1.5rem 0;
    background-color: var(--code-bg);
    border: 1px solid var(--code-border);
    color: var(--code-text);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  /* Estilos para código en línea */
  .prose :not(pre) > code {
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
    font-size: 0.875em;
    font-weight: 500;
    color: var(--code-keyword);
    background-color: var(--code-bg);
    padding: 0.2em 0.4em;
    border-radius: 0.25em;
    white-space: nowrap;
    border: 1px solid var(--code-border);
  }
  
  /* Encabezados con estilo mejorado */
  .prose h2 {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--secondary);
    margin-top: 2.5rem;
    margin-bottom: 1.25rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e5e7eb;
    position: relative;
  }
  
  .prose h2::before {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 3rem;
    height: 2px;
    background: linear-gradient(90deg, #0ea5e9, #14b8a6);
  }
  
  .prose h3 {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--secondary);
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  /* Listas con íconos y mejor espaciado */
  .prose ul {
    list-style-type: none !important;
    counter-reset: none !important;
    padding-left: 2rem;
    margin: 1.5rem 1rem 1.5rem 0.5rem;
  }
  
  .prose ul li {
    position: relative;
    margin-bottom: 0.75rem;
    padding-left: 0.5rem;
    transition: all 0.2s ease;
    counter-increment: none !important;
  }
  
  .prose ul li::before {
    content: "" !important;
    position: absolute;
    left: -1.25rem;
    top: 0.6em;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: #14b8a6;
    box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.2);
    transform: translateY(-50%);
  }
  
  /* Remover cualquier numeración o contenido en el ::before */
  .prose ul li::marker {
    content: none !important;
    display: none !important;
  }
  
  .prose ul li:hover {
    transform: translateX(3px);
  }
  
  /* Estilo para listas anidadas */
  .prose ul ul {
    margin-top: 0.75rem;
    margin-left: 0.5rem;
  }
  
  .prose ul ul li::before {
    width: 5px;
    height: 5px;
    background-color: #0ea5e9;
  }

  /* Para listas ordenadas (numeradas) */
  .prose ol {
    list-style: none;
    counter-reset: custom-counter;
    padding-left: 2rem;
    margin: 1.5rem 1rem 1.5rem 0.5rem;
  }
  
  .prose ol li {
    position: relative;
    counter-increment: custom-counter;
    margin-bottom: 0.75rem;
    padding-left: 0.5rem;
    transition: all 0.2s ease;
  }
  
  .prose ol li::before {
    content: counter(custom-counter) !important;
    position: absolute;
    left: -2rem;
    top: 0.15em;
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 50%;
    background: linear-gradient(135deg, #14b8a6, #0ea5e9);
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Estilos específicos para las listas en el artículo de Spring Boot */
  .prose article ul li::before {
    content: "" !important;
    display: block !important;
    counter-increment: none !important;
  }
  
  /* Forzar estilo de lista no ordenada */
  .prose *:not(ol) > li {
    list-style-type: none !important;
    counter-increment: none !important;
  }
  
  .prose *:not(ol) > li::before {
    content: "" !important;
  }

  /* Estilo para bloques de información o nota */
  .prose blockquote {
    margin: 1.5rem 0;
    padding: 1.25rem 1.5rem;
    border-left: 4px solid #14b8a6;
    background-color: #f8fafc;
    border-radius: 0 0.5rem 0.5rem 0;
    font-style: normal;
    color: #334155;
  }
  
  .dark .prose blockquote {
    background-color: #1e293b;
    color: #e2e8f0;
  }
  
  .prose blockquote p {
    margin: 0;
  }
  
  /* Estilo para tablas */
  .prose table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin: 2rem 0;
    font-size: 0.9rem;
    line-height: 1.6;
    text-align: left;
    border-radius: 0.5rem;
    overflow: hidden;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .prose thead {
    background-color: #f1f5f9;
    color: #334155;
    font-weight: 600;
  }
  
  .dark .prose thead {
    background-color: #334155;
    color: #f1f5f9;
  }
  
  .prose th {
    padding: 0.75rem 1rem;
    font-weight: 600;
    border-bottom: 1px solid #e2e8f0;
  }
  
  .prose td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #e2e8f0;
  }
  
  .dark .prose td, .dark .prose th {
    border-color: #475569;
  }
  
  .prose tbody tr:last-child td {
    border-bottom: none;
  }
  
  /* Enlace de ancla para encabezados */
  .prose h2 a, .prose h3 a {
    text-decoration: none;
    position: relative;
  }
  
  .prose h2 a:hover::after, .prose h3 a:hover::after {
    content: "#";
    position: absolute;
    left: -1.5rem;
    color: #94a3b8;
    font-weight: normal;
  }
  
  /* Estilo para resaltar código de lenguajes específicos */
  .prose .language-java {
    color: var(--code-text);
  }
  
  .prose .language-java .keyword {
    color: var(--code-keyword);
  }
  
  .prose .language-java .string {
    color: var(--code-string);
  }
  
  .prose .language-java .function {
    color: var(--code-function);
  }
  
  .prose .language-java .comment {
    color: var(--code-comment);
    font-style: italic;
  }
  
  /* Etiqueta de lenguaje en bloques de código */
  /* .prose pre::before {
    content: attr(data-language);
    position: absolute;
    top: 0;
    right: 0;
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: white;
    background-color: #14b8a6;
    border-bottom-left-radius: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  } */

  /* Estilos específicos para las listas en artículos */
  .article-content ul {
    list-style-type: none !important;
    padding-left: 2rem !important;
    margin: 1.5rem 1rem 1.5rem 0.5rem !important;
  }

  .article-content ul li {
    position: relative !important;
    margin-bottom: 0.75rem !important;
    padding-left: 0.5rem !important;
    transition: all 0.2s ease !important;
    counter-increment: none !important;
  }

  .article-content ul li::before {
    content: "" !important;
    position: absolute !important;
    left: -1.25rem !important;
    top: 0.6em !important;
    width: 6px !important;
    height: 6px !important;
    border-radius: 50% !important;
    background-color: #14b8a6 !important;
    box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.2) !important;
    transform: translateY(-50%) !important;
  }

  .article-content ul li::marker {
    content: none !important;
    display: none !important;
  }

  .article-content ul li:hover {
    transform: translateX(3px) !important;
  }

  .article-content ol {
    list-style: none !important;
    counter-reset: custom-counter !important;
    padding-left: 2rem !important;
    margin: 1.5rem 1rem 1.5rem 0.5rem !important;
  }

  .article-content ol li {
    position: relative !important;
    counter-increment: custom-counter !important;
    margin-bottom: 0.75rem !important;
    padding-left: 0.5rem !important;
    transition: all 0.2s ease !important;
  }

  .article-content ol li::before {
    content: counter(custom-counter) !important;
    position: absolute !important;
    left: -2rem !important;
    top: 0.15em !important;
    width: 1.5rem !important;
    height: 1.5rem !important;
    border-radius: 50% !important;
    background: linear-gradient(135deg, #14b8a6, #0ea5e9) !important;
    color: white !important;
    font-size: 0.75rem !important;
    font-weight: 600 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  .article-content ol li:hover {
    transform: translateX(3px) !important;
  }

  /* Estilos específicos para las listas en el artículo de Spring Boot */
  .prose article ul li::before {
    content: "" !important;
    display: block !important;
    counter-increment: none !important;
  }

  /* Estilos para listas anidadas */
  .article-content ol ul,
  .article-content li ul {
    list-style-type: none !important;
    counter-reset: none !important;
    padding-left: 1.5rem !important;
    margin-top: 0.75rem !important;
    margin-bottom: 0.5rem !important;
  }

  .article-content ol ul li,
  .article-content li ul li {
    counter-increment: none !important;
    position: relative !important;
    margin-bottom: 0.5rem !important;
  }

  .article-content ol ul li::before,
  .article-content li ul li::before {
    content: "" !important;
    position: absolute !important;
    left: -1.25rem !important;
    top: 0.6em !important;
    width: 6px !important;
    height: 6px !important;
    border-radius: 50% !important;
    background-color: #14b8a6 !important;
    box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.2) !important;
    transform: translateY(-50%) !important;
  }

  /* Estilos mejorados para enlaces en artículos */
  .article-content a {
    color: #0ea5e9 !important;
    font-weight: 500 !important;
    text-decoration: none !important;
    border-bottom: 1.5px solid rgba(14, 165, 233, 0.3) !important;
    transition: all 0.2s ease-in-out !important;
    padding-bottom: 1px !important;
    position: relative !important;
    background-image: none !important;
  }

  .article-content a:hover {
    color: #0284c7 !important;
    border-bottom-color: #0284c7 !important;
    background-color: rgba(14, 165, 233, 0.05) !important;
  }

  .article-content a::after {
    content: none !important;
    display: none !important;
  }

  .article-content a:hover {
    border-bottom: 1.5px solid #0284c7 !important;
  }

  .article-content a[href^="http"]:not([href*="mostapha.dev"]) {
    padding-right: 1.25em !important;
    position: relative !important;
  }

  .article-content a[href^="http"]:not([href*="mostapha.dev"])::after {
    content: "↗" !important;
    position: absolute !important;
    right: 0 !important;
    top: 0 !important;
    font-size: 0.7em !important;
    line-height: 1.7 !important;
    opacity: 0.7 !important;
    display: inline-block !important;
  }

  .article-content a[href^="/"]:after,
  .article-content a[href*="mostapha.dev"]:after {
    display: none !important;
    content: none !important;
  }

  .dark .article-content a {
    color: #38bdf8 !important;
    border-bottom-color: rgba(56, 189, 248, 0.3) !important;
  }

  .dark .article-content a:hover {
    color: #7dd3fc !important;
    border-bottom-color: #7dd3fc !important;
    background-color: rgba(56, 189, 248, 0.05) !important;
  }

  /* Mejoras para los bloques de código */
  .article-content pre {
    position: relative !important;
    border-radius: 0.5rem !important;
    background-color: #f8fafc !important;
    border: 1px solid #e2e8f0 !important;
    overflow: hidden !important;
    margin: 1.5rem 0 !important;
  }

  .dark .article-content pre {
    background-color: #0f172a !important;
    border-color: #1e293b !important;
  }

  /* .article-content pre::before {
    content: attr(data-language);
    position: absolute !important;
    top: 0 !important;
    right: 0 !important;
    padding: 0.25rem 0.75rem !important;
    font-size: 0.75rem !important;
    font-weight: 600 !important;
    color: white !important;
    background-color: #0284c7 !important; 
    border-bottom-left-radius: 0.5rem !important;
    text-transform: uppercase !important;
    letter-spacing: 0.05em !important;
    z-index: 10 !important;
  } */

  /* Para el botón de copiar (ahora será solo un área, el SVG lo pondremos en el componente) */
  .article-content pre::after {
    content: "" !important;
    position: absolute !important;
    top: 0.5rem !important;
    right: 0.5rem !important;
    width: 2rem !important;
    height: 2rem !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background-color: rgba(255, 255, 255, 0.1) !important;
    border-radius: 0.25rem !important;
    cursor: pointer !important;
    opacity: 0 !important; /* Lo hacemos completamente transparente, el SVG lo reemplazará */
    transition: all 0.2s ease !important;
    z-index: 20 !important;
  }

  .article-content pre:hover::after {
    opacity: 0 !important; /* También invisible en hover */
  }

  /* Eliminamos cualquier otro elemento que pueda tener color verde */
  .article-content pre *::before,
  .article-content pre *::after {
    background-color: transparent !important;
    border-color: transparent !important;
  }

  .article-content pre code {
    display: block !important;
    padding: 1.25rem !important;
    overflow-x: auto !important;
    font-family: 'Fira Code', 'Roboto Mono', Monaco, Consolas, monospace !important;
    font-size: 0.85rem !important;
    line-height: 1.5 !important;
  }

  /* Indicador de número de línea */
  .article-content pre code .line-number {
    display: inline-block !important;
    width: 1.5rem !important;
    text-align: right !important;
    color: #94a3b8 !important;
    margin-right: 1rem !important;
    user-select: none !important;
  }

  /* Estilos específicos para las listas en el artículo de Spring Boot */
}

@layer utilities {
  .bg-primary {
    background-color: var(--primary) !important;
  }

  .text-primary {
    color: var(--primary);
  }

  .bg-secondary {
    background-color: var(--secondary) !important;
  }

  .text-secondary {
    color: var(--secondary);
  }

  .bg-third {
    background-color: var(--third) !important;
  }

  .text-third {
    color: var(--third);
  }

  .ease-\[cubic-bezier\(0\.2\,0\,0\,1\)\] {
    transition-timing-function: cubic-bezier(0.2, 0, 0, 1);
  }

  [popover]:starting {
    display: block;
  }
  
  /* Utilidades para elementos técnicos */
  .tech-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.625rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    background-color: #dbeafe;
    color: #1e40af;
  }
  
  .dark .tech-badge {
    background-color: #1e3a8a;
    color: #93c5fd;
  }
  
  .code-filename {
    display: block;
    font-size: 0.875rem;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    color: #6b7280;
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .dark .code-filename {
    color: #9ca3af;
    border-bottom-color: #374151;
  }
  
  .tech-note {
    padding: 1rem;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
    border-radius: 0.5rem;
    background-color: #fffbeb;
    border-left: 4px solid #f59e0b;
    color: #92400e;
  }
  
  .dark .tech-note {
    background-color: rgba(146, 64, 14, 0.1);
    color: #fcd34d;
    border-left-color: #f59e0b;
  }
  
  .tech-tip {
    padding: 1rem;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
    border-radius: 0.5rem;
    background-color: #ecfdf5;
    border-left: 4px solid #10b981;
    color: #065f46;
  }
  
  .dark .tech-tip {
    background-color: rgba(6, 95, 70, 0.1);
    color: #6ee7b7;
    border-left-color: #10b981;
  }
  
  .tech-warning {
    padding: 1rem;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
    border-radius: 0.5rem;
    background-color: #fee2e2;
    border-left: 4px solid #ef4444;
    color: #991b1b;
  }
  
  .dark .tech-warning {
    background-color: rgba(153, 27, 27, 0.1);
    color: #fca5a5;
    border-left-color: #ef4444;
  }
}
